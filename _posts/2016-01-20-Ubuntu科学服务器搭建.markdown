---
layout:     post
title:      "Ubuntu科学上网服务器搭建"
subtitle:   " \"Ubuntu科学上网服务器搭建\""
date:       2016-01-10 12:00:00
author:     "X-ray"
header-img: "img/post-bg-2015.jpg"
tags:
    - Ubuntu
---
前言
--

受天朝GFW的影响，包括大Google在内的很多境外网站访问不了，所以天朝的程序猿大多都练就了一种叫"翻墙"的功夫.从自由门，配置host，到goAgent，再到现在各色各样的vpn，翻墙的姿势也随着时代的发展发生着变化。

工具
--
代理服务器：[搬瓦工](https://bandwagonhost.com/)（我租的是每月5刀的，1T的流量，对于个人用绰绰有余了）
系统：Ubuntu 14.04
代理工具：[shadowsocks](https://github.com/ziggear/shadowsocks) (项目的原作者去年被请去喝茶，所以停止更新了，但是相信一个shadowsocks倒下去，成千上万的shadowsocks会站起来)

配置服务器
--
1.先到[搬瓦工](https://bandwagonhost.com/)租个云服务器，类似国内的阿里云，腾讯云。

![这里写图片描述](http://img.blog.csdn.net/20160120125049014)


之后就是购买的一些流程，比如让你选择服务器的位置（我选的是洛杉矶）还有就是些你的用户信息，支付的时候意外的发现搬瓦工居然支持支付宝，这一点很方便。


![这里写图片描述](http://img.blog.csdn.net/20160120125809421)


![这里写图片描述](http://img.blog.csdn.net/20160120131032094)


![填写一些用户信息](http://img.blog.csdn.net/20160120131245223)


![支付环节](http://img.blog.csdn.net/20160120131649416)


支付成功后到Client Area->Service->MyService->KiWiControl Panel
就可以看到你服务器的配置信息了


![这里写图片描述](http://img.blog.csdn.net/20160120132507809)


![这里写图片描述](http://img.blog.csdn.net/20160120132549684)


![这里写图片描述](http://img.blog.csdn.net/20160120132614978)


之后的工作就是在服务器上安装shadowsocks.
通过终端ssh到服务器，在Ubuntu上安装shadowsocks比较方便，shadowsocks使用python写的（当然也有其他版本的，例如：go语言的），所以需要一个管理python包的工具PIP，安装PIP的命令如下：

```
~# apt–get install python–gevent python–pip
```

然后可以直接安装 shadowsocks 了

```
~# pip install shadowsocks
```

然后就是配置shadowsocks，自己写个配置文件/etc/shadowsocks.json

```
{
"server":"你服务器的ip",
"server_port":8388,
"password":"密码",
"timeout":300,
"method":"aes-256-cfb",
"fast_open":false,
"workers": 1
}
```
server: 你自己服务器的ip
server_port:给shadowsocks分配的端口，默认是8388
password: 你设置的shadowsocks 密码
timeout：超时时间，默认是300秒
method： 加密方法，默认是aes-256-cfb
fast_open: 在Linux3.7+可以使用TCP_FASTOPEN 
workers:  number of workers (应该是客户端账户的个数，没理解明白)

之后通过下面的命令就可以启动shadowsocks了

```
ssserver -c /etc/shadowsocks.json -d start
```

这样服务端的任务就已经完成了

当然了我们也可以把shadowsocks设置为开机自起
把上面的命令配置到/etc/rc.local 中就可以了

![这里写图片描述](http://img.blog.csdn.net/20160120144054744)

这样，即使重启服务器，shadowsocks也会自动启动

到这里服务端已经大功告成！！！


----------

客户端配置
-----

windows系统：需要[shadowsocks客户端](https://github.com/shadowsocks/shadowsocks-windows/releases)，配置如图（我用的是Ubuntu的图，windows界面类似）


![这里写图片描述](http://img.blog.csdn.net/20160120151631242)


之后需要配合浏览器的代理服务器功能.

如果利用Chrome插件Proxy SwitchySharp，注意一定要选择SOCKS5 










[所有客户端的下载地址](https://shadowsocks.org/en/download/clients.html)
	


~         
结束
--
配置比较简单，网上的资料一大堆，最后吐槽一下Baidu最近的血友病事件，一个卖假药，一个研究量子计算机，这就是Baidu和Google的差距。